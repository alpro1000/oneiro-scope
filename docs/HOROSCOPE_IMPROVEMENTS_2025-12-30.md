# –£–ª—É—á—à–µ–Ω–∏—è –°–∏—Å—Ç–µ–º—ã –ì–æ—Ä–æ—Å–∫–æ–ø–æ–≤ - 2025-12-30

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ:
1. **–ì–æ—Ä–æ—Å–∫–æ–ø –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –Ω–µ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ** - —Å–ª–∏—à–∫–æ–º –∫—Ä–∞—Ç–∫–∏–π, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π
2. **–î–Ω–µ–≤–Ω—ã–µ/–Ω–µ–¥–µ–ª—å–Ω—ã–µ/–º–µ—Å—è—á–Ω—ã–µ/–≥–æ–¥–æ–≤—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã** - –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞
3. **–ü—Ä–æ–≥–Ω–æ–∑—ã —Å–æ–±—ã—Ç–∏–π –¥–æ–ª–∂–Ω—ã —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É** - –±—ã–ª–∏ —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## ‚úÖ –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –†–∞–∑–Ω—ã—Ö –ü–µ—Ä–∏–æ–¥–æ–≤

**–§–∞–π–ª:** `backend/services/astrology/ai/astro_reasoner.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –æ–¥–∏–Ω –æ–±—â–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (daily/weekly/monthly/yearly)

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞:

```python
# Select appropriate prompt based on period
prompt_template = HOROSCOPE_PROMPT  # default
if period.lower() == "daily":
    prompt_template = DAILY_HOROSCOPE_PROMPT
elif period.lower() == "weekly":
    prompt_template = WEEKLY_HOROSCOPE_PROMPT
elif period.lower() == "monthly":
    prompt_template = MONTHLY_HOROSCOPE_PROMPT
elif period.lower() == "yearly":
    prompt_template = YEARLY_HOROSCOPE_PROMPT
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `backend/services/astrology/ai/astro_reasoner.py:182-191`
- `backend/services/astrology/ai/astro_reasoner.py:10-22` (–∏–º–ø–æ—Ä—Ç—ã)
- `backend/services/astrology/ai/__init__.py` (—ç–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤)

---

### 2. –£–≤–µ–ª–∏—á–µ–Ω–∞ –†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ—Å—Ç—å –û—Ç–≤–µ—Ç–æ–≤

**–§–∞–π–ª:** `backend/services/astrology/ai/prompt_templates.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞:**

```python
# –ë–´–õ–û:
–î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: 300-500 —Å–ª–æ–≤.

# –°–¢–ê–õ–û:
–î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: 600-1000 —Å–ª–æ–≤ –¥–ª—è —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏.
–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è.
```

**–§–∞–π–ª –∏–∑–º–µ–Ω—ë–Ω:** `backend/services/astrology/ai/prompt_templates.py:49-50`

---

### 3. –£–≤–µ–ª–∏—á–µ–Ω max_tokens –¥–ª—è LLM

**–§–∞–π–ª:** `backend/services/astrology/ai/astro_reasoner.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ —Å 2000 –¥–æ 4000 –¥–ª—è –±–æ–ª–µ–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π

```python
# –ë–´–õ–û:
max_tokens: int = 2000

# –°–¢–ê–õ–û:
max_tokens: int = 4000
```

**–§–∞–π–ª –∏–∑–º–µ–Ω—ë–Ω:** `backend/services/astrology/ai/astro_reasoner.py:37`

---

### 4. –ü—Ä–æ–≥–Ω–æ–∑—ã –°–æ–±—ã—Ç–∏–π –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ù–∞—Ç–∞–ª—å–Ω—É—é –ö–∞—Ä—Ç—É

**–§–∞–π–ª:** `backend/services/astrology/interpreter.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** `generate_event_recommendations` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AstroReasoner –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤:

```python
async def generate_event_recommendations(
    self,
    event_type: EventType,
    transits: list[TransitInfo],
    positive_factors: list[str],
    risk_factors: list[str],
    locale: str = "ru",
    sun_sign: Optional[ZodiacSign] = None,  # –ù–û–í–û–ï
    moon_sign: Optional[ZodiacSign] = None,  # –ù–û–í–û–ï
    event_date: Optional[str] = None,  # –ù–û–í–û–ï
    event_location: Optional[str] = None,  # –ù–û–í–û–ï
    retrograde_planets: Optional[list[Planet]] = None,  # –ù–û–í–û–ï
    lunar_phase: Optional[str] = None,  # –ù–û–í–û–ï
    lunar_day: Optional[int] = None,  # –ù–û–í–û–ï
) -> list[str]:
    # Try AstroReasoner first if natal chart is available
    if self.reasoner and sun_sign and moon_sign and event_date:
        result = await self.reasoner.interpret_event_forecast(...)
        return result.get("recommendations", [])

    # Fallback to template-based recommendations
    ...
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `backend/services/astrology/interpreter.py:293-395` (—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞ + –ª–æ–≥–∏–∫–∞)
- `backend/services/astrology/service.py:360-377` (–ø–µ—Ä–µ–¥–∞—á–∞ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã)

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ü—Ä–æ–º–ø—Ç–æ–≤

### DAILY_HOROSCOPE_PROMPT
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–Ω–µ–≤–Ω–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:
- **–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è** - –≥–ª–∞–≤–Ω–∞—è —Ç–µ–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω–∑–∏—Ç–æ–≤
- **–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** - —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è
- **–ß—Ç–æ –∏–∑–±–µ–≥–∞—Ç—å** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **–õ—É–Ω–Ω—ã–π —Å–æ–≤–µ—Ç** - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –ª—É–Ω–Ω–æ–≥–æ –¥–Ω—è
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–Ω—è** - –≥–ª–∞–≤–Ω—ã–π —Å–æ–≤–µ—Ç

### WEEKLY_HOROSCOPE_PROMPT
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:
- **–û–±—â–∞—è —Ç–µ–º–∞ –Ω–µ–¥–µ–ª–∏**
- **–†–∞–∑–±–∏–≤–∫–∞ –ø–æ –¥–Ω—è–º** (–ü–Ω-–í—Ç, –°—Ä-–ß—Ç, –ü—Ç-–í—ã—Ö)
- **–õ—É—á—à–∏–µ –¥–Ω–∏ –¥–ª—è** –∫–∞—Ä—å–µ—Ä—ã/–æ—Ç–Ω–æ—à–µ–Ω–∏–π/–æ—Ç–¥—ã—Ö–∞
- **–°–ª–æ–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã** - –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é**

### MONTHLY_HOROSCOPE_PROMPT
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Å—è—á–Ω–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:
- **–û–±–∑–æ—Ä –º–µ—Å—è—Ü–∞** - –≥–ª–∞–≤–Ω—ã–µ —Ç–µ–º—ã
- **–†–∞–∑–±–∏–≤–∫–∞ –ø–æ –Ω–µ–¥–µ–ª—è–º** (1-7, 8-14, 15-21, 22-–∫–æ–Ω–µ—Ü)
- **–ö–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã** - –≤–∞–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∏—Ç—ã
- **–°—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏** - –∫–∞—Ä—å–µ—Ä–∞/–æ—Ç–Ω–æ—à–µ–Ω–∏—è/–∑–¥–æ—Ä–æ–≤—å–µ/—Ñ–∏–Ω–∞–Ω—Å—ã
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –º–µ—Å—è—Ü**

### YEARLY_HOROSCOPE_PROMPT
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ–¥–æ–≤–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:
- **–û–±–∑–æ—Ä –≥–æ–¥–∞** - –≥–ª–∞–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–†–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º** (Q1-Q4)
- **–ì–ª–∞–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–æ–¥–∞**
- **–ì–ª–∞–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –≥–æ–¥–∞**
- **–°—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
- **–ö–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã –≥–æ–¥–∞** - 5-7 –≤–∞–∂–Ω–µ–π—à–∏—Ö —Å–æ–±—ã—Ç–∏–π
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

---

## üîÑ –ü–æ—Ç–æ–∫ –î–∞–Ω–Ω—ã—Ö

### –ì–æ—Ä–æ—Å–∫–æ–ø (Horoscope)

```
POST /api/v1/astrology/horoscope
         ‚îÇ
         ‚ñº
AstrologyService.get_horoscope()
         ‚îÇ
         ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç natal_chart (—Å sun_sign, moon_sign, ascendant)
         ‚îú‚îÄ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∏—Ç—ã –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞
         ‚îú‚îÄ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã
         ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç –ª—É–Ω–Ω—É—é —Ñ–∞–∑—É –∏ –¥–µ–Ω—å
         ‚îÇ
         ‚ñº
AstroInterpreter.interpret_horoscope()
         ‚îÇ
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç sun_sign, moon_sign, ascendant
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç transits, retrograde_planets
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç lunar_phase, lunar_day
         ‚îÇ
         ‚ñº
AstroReasoner.interpret_horoscope()
         ‚îÇ
         ‚îú‚îÄ –í–´–ë–ò–†–ê–ï–¢ –ü–†–û–ú–ü–¢ –ø–æ period:
         ‚îÇ  ‚Ä¢ daily ‚Üí DAILY_HOROSCOPE_PROMPT
         ‚îÇ  ‚Ä¢ weekly ‚Üí WEEKLY_HOROSCOPE_PROMPT
         ‚îÇ  ‚Ä¢ monthly ‚Üí MONTHLY_HOROSCOPE_PROMPT
         ‚îÇ  ‚Ä¢ yearly ‚Üí YEARLY_HOROSCOPE_PROMPT
         ‚îÇ
         ‚îú‚îÄ –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
         ‚îú‚îÄ –í—ã–∑—ã–≤–∞–µ—Ç LLM (max_tokens=4000)
         ‚îÇ
         ‚ñº
LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø (600-1000 —Å–ª–æ–≤)
```

### –ü—Ä–æ–≥–Ω–æ–∑ –°–æ–±—ã—Ç–∏—è (Event Forecast)

```
POST /api/v1/astrology/event-forecast
         ‚îÇ
         ‚ñº
AstrologyService.forecast_event()
         ‚îÇ
         ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç natal_chart (—Å sun_sign, moon_sign)
         ‚îú‚îÄ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∏—Ç—ã –Ω–∞ –¥–∞—Ç—É —Å–æ–±—ã—Ç–∏—è
         ‚îú‚îÄ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã
         ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç –ª—É–Ω–Ω—É—é —Ñ–∞–∑—É –∏ –¥–µ–Ω—å
         ‚îÇ
         ‚ñº
AstroInterpreter.generate_event_recommendations()
         ‚îÇ
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç sun_sign, moon_sign  # ‚Üê –ù–û–í–û–ï!
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç event_date, event_location  # ‚Üê –ù–û–í–û–ï!
         ‚îú‚îÄ –ü–µ—Ä–µ–¥–∞—ë—Ç retrograde_planets, lunar_phase, lunar_day  # ‚Üê –ù–û–í–û–ï!
         ‚îÇ
         ‚ñº
AstroReasoner.interpret_event_forecast()
         ‚îÇ
         ‚îú‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç EVENT_FORECAST_PROMPT
         ‚îú‚îÄ –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã  # ‚Üê –ù–û–í–û–ï!
         ‚îú‚îÄ –í—ã–∑—ã–≤–∞–µ—Ç LLM (max_tokens=4000)
         ‚îÇ
         ‚ñº
LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

### –î–æ
- ‚ùå –ö—Ä–∞—Ç–∫–∏–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã (300-500 —Å–ª–æ–≤)
- ‚ùå –û–¥–∏–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
- ‚ùå –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±–µ–∑ —É—á—ë—Ç–∞ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
- ‚ùå –ü—Ä–æ–≥–Ω–æ–∑—ã —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ—Å–ª–µ
- ‚úÖ –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã (600-1000 —Å–ª–æ–≤)
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ Sun/Moon/Ascendant
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑—ã —Å–æ–±—ã—Ç–∏–π —É—á–∏—Ç—ã–≤–∞—é—Ç –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç—Ä–∞–Ω–∑–∏—Ç–∞–º –∏ –∞—Å–ø–µ–∫—Ç–∞–º

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–Ω–µ–≤–Ω—ã–π –ì–æ—Ä–æ—Å–∫–æ–ø

**–ó–∞–ø—Ä–æ—Å:**
```json
POST /api/v1/astrology/horoscope
{
  "natal_chart_id": "uuid-1234",
  "period": "daily",
  "target_date": "2025-12-31",
  "locale": "ru"
}
```

**–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- –≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω–∑–∏—Ç–æ–≤ –∫ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–µ
- –ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —É—á—ë—Ç–æ–º Sun/Moon/Ascendant
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö
- –õ—É–Ω–Ω—ã–π —Å–æ–≤–µ—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª—É–Ω–Ω–æ–≥–æ –¥–Ω—è
- –ì–ª–∞–≤–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–Ω—è

### –ü—Ä–æ–≥–Ω–æ–∑ –°–æ–±—ã—Ç–∏—è

**–ó–∞–ø—Ä–æ—Å:**
```json
POST /api/v1/astrology/event-forecast
{
  "natal_chart_id": "uuid-1234",
  "event_type": "business",
  "event_date": "2026-01-15",
  "event_location": "–ú–æ—Å–∫–≤–∞",
  "locale": "ru"
}
```

**–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- –û—Ü–µ–Ω–∫–∞ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏ (0-100%)
- –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
- –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞ —Å —É—á—ë—Ç–æ–º —Ç—Ä–∞–Ω–∑–∏—Ç–æ–≤
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–∞—Ç—ã (–µ—Å–ª–∏ –æ—Ü–µ–Ω–∫–∞ < 50%)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞—Ç—å –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É:**
   ```bash
   POST /api/v1/astrology/natal-chart
   {
     "birth_date": "1990-05-15",
     "birth_time": "14:30",
     "birth_place": "–ú–æ—Å–∫–≤–∞",
     "locale": "ru"
   }
   ```

2. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø:**
   ```bash
   POST /api/v1/astrology/horoscope
   {
     "natal_chart_id": "<id –∏–∑ —à–∞–≥–∞ 1>",
     "period": "daily",
     "locale": "ru"
   }
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - ‚úÖ –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 600-1000 —Å–ª–æ–≤
   - ‚úÖ –£–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∏—Ç—ã
   - ‚úÖ –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ Sun/Moon/Ascendant –∏–∑ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
   - ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç DAILY_HOROSCOPE_PROMPT

4. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ —Å–æ–±—ã—Ç–∏—è:**
   ```bash
   POST /api/v1/astrology/event-forecast
   {
     "natal_chart_id": "<id –∏–∑ —à–∞–≥–∞ 1>",
     "event_type": "wedding",
     "event_date": "2026-06-20",
     "locale": "ru"
   }
   ```

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
   - ‚úÖ –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞
   - ‚úÖ –£—á—Ç–µ–Ω—ã —Ç—Ä–∞–Ω–∑–∏—Ç—ã –∫ –Ω–∞—Ç–∞–ª—å–Ω—ã–º –ø–ª–∞–Ω–µ—Ç–∞–º

---

## üìÇ –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –§–∞–π–ª—ã

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ
1. `backend/services/astrology/ai/astro_reasoner.py` - –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞, max_tokens
2. `backend/services/astrology/ai/prompt_templates.py` - –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
3. `backend/services/astrology/ai/__init__.py` - —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–º–ø—Ç–æ–≤
4. `backend/services/astrology/interpreter.py` - event_forecast —Å –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ–π
5. `backend/services/astrology/service.py` - –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –≤ event_forecast

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ
6. `docs/HOROSCOPE_IMPROVEMENTS_2025-12-30.md` - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

---

## üéì –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –†–µ—à–µ–Ω–∏—è

### 1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ü—Ä–æ–º–ø—Ç–æ–≤

**–ü—Ä–∏–Ω—Ü–∏–ø:** "–û–¥–∏–Ω –ø—Ä–æ–º–ø—Ç - –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞"

–ö–∞–∂–¥—ã–π –ø–µ—Ä–∏–æ–¥ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –∏–º–µ–µ—Ç —Å–≤–æ—é —Å–ø–µ—Ü–∏—Ñ–∏–∫—É:
- **Daily**: –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –≤—Ä–µ–º—è –¥–Ω—è
- **Weekly**: —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- **Monthly**: —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ –Ω–µ–¥–µ–ª—è–º + –∫–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã
- **Yearly**: —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º + —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
- –¢–æ—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
- –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ LLM-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### 2. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ù–∞—Ç–∞–ª—å–Ω—É—é –ö–∞—Ä—Ç—É

**–ü—Ä–∏–Ω—Ü–∏–ø:** "–ö–∞–∂–¥—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø —É–Ω–∏–∫–∞–ª–µ–Ω"

–í—Å–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞—é—Ç:
- **Sun Sign** - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å
- **Moon Sign** - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
- **Ascendant** - –≤–Ω–µ—à–Ω–µ–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ì–æ—Ä–æ—Å–∫–æ–ø—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —á–µ–ª–æ–≤–µ–∫—É
- –¢—Ä–∞–Ω–∑–∏—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫ –Ω–∞—Ç–∞–ª—å–Ω—ã–º –ø–ª–∞–Ω–µ—Ç–∞–º
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 3. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–Ω—Ü–∏–ø:** "–ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ - –ª—É—á—à–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è"

- **max_tokens**: 2000 ‚Üí 4000 (–≤ 2 —Ä–∞–∑–∞)
- **target_words**: 300-500 ‚Üí 600-1000 (–≤ 2 —Ä–∞–∑–∞)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.**

**–ö–æ–º–º–∏—Ç:** Pending
**–í–µ—Ç–∫–∞:** `claude/update-documentation-En0hK`

---

## üîú –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. ‚úÖ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. ‚úÖ –ó–∞–ø—É—à–∏—Ç—å –≤ remote
3. üîÑ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production
4. üìä –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. üé® –£–ª—É—á—à–∏—Ç—å frontend –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤

---

**–î–∞—Ç–∞:** 2025-12-30
**–ê–≤—Ç–æ—Ä:** Claude
**–°–µ—Å—Å–∏—è:** `claude/update-documentation-En0hK`
